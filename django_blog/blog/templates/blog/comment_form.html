{% extends "blog/base.html" %}

{% block content %}
    <div class="max-w-xl mx-auto mt-10 p-6 bg-white shadow-lg rounded-xl">
        
        <!-- Conditional title based on whether we are editing an existing comment (pk exists) or adding a new one -->
        <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">
            {% if form.instance.pk %}Edit Comment{% else %}Add Comment{% endif %}
        </h2>
        
        <!-- Display the original post title for context, only visible when editing -->
        {% if form.instance.pk %}
            <p class="text-gray-600 mb-4">
                on post: 
                <a href="{% url 'post_detail' pk=comment.post.pk %}" class="text-indigo-600 hover:text-indigo-800 font-semibold">
                    "{{ comment.post.title }}"
                </a>
            </p>
        {% endif %}

        <form method="POST">
            {% csrf_token %}
            
            <!-- Render the form fields (only 'content' is included in the CommentForm) -->
            {{ form.as_p }}

            <div class="flex justify-end space-x-3 mt-6">
                <!-- Submit Button -->
                <button type="submit" class="px-5 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md">
                    {% if form.instance.pk %}Save Changes{% else %}Post Comment{% endif %}
                </button>
                
                <!-- Cancel Button: redirects to the post detail page -->
                <a href="{% url 'post_detail' pk=comment.post.pk %}" class="px-5 py-2 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition duration-150">
                    Cancel
                </a>
            </div>
        </form>
    </div>
{% endblock content %}
